import express from "express";
import { randomBytes } from "crypto";

const app = express();
const port = process.env.PORT || 3000;

app.get("/", (req, res) => {
  res.send(`
  <html>
    <head>
      <title>LEGEND X RAFAY MD - Session ID</title>
      <style>
        body {
          background: #0d1117;
          color: #fff;
          font-family: 'Poppins', sans-serif;
          text-align: center;
          padding: 80px;
        }
        h1 { color: #00ffff; }
        button {
          background: #00ffff;
          border: none;
          color: #000;
          padding: 12px 24px;
          border-radius: 10px;
          font-size: 18px;
          cursor: pointer;
        }
        .id-box {
          background: #161b22;
          border-radius: 10px;
          padding: 20px;
          margin-top: 20px;
          word-break: break-all;
        }
      </style>
    </head>
    <body>
      <h1>LEGEND X RAFAY MD ðŸ”¥</h1>
      <p>Click below to generate your Session ID</p>
      <button onclick="generate()">Generate Session ID</button>
      <div class="id-box" id="sessionBox"></div>

      <script>
        async function generate() {
          const res = await fetch('/session');
          const data = await res.json();
          document.getElementById('sessionBox').innerText = data.session;
        }
      </script>
    </body>
  </html>
  `);
});

app.get("/session", (req, res) => {
  const session = randomBytes(32).toString("hex");
  res.json({ session });
});

app.listen(port, () => console.log(`LEGEND X RAFAY MD running on port ${port}`));
